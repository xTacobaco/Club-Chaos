#pragma once
#include <glad/glad.h>

#include "Tile.h"
#include "Dice.h"
#include "Player.h"
#include <vector>

#include "NPC.h"

class Level {
public:
	static const unsigned int tx = 40, ty = 23;
	NPC* npc[4];
	Tile* tiles[tx * ty];

	std::vector<std::vector<glm::vec2>> pp;
	int currentPath = 0;

	std::vector<glm::vec2> path = {
	{0,11},
	{1,11},
	{2,11},
	{3,11},
	{3,10},
	{3,9},
	{3,8},
	{3,7},
	{4,7},
	{5,7},
	{6,7},
	{7,7},
	{8,7},
	{9,7},
	{10,7},
	{11,7},
	{12,7},
	{13,7},
	{13,8},
	{13,9},
	{13,10},
	{13,11},
	{14,11},
	{15,11},
	{16,11},
	{17,11},
	{18,11},
	{19,11},
	{20,11},
	{21,11},
	{22,11},
	{23,11},
	{24,11},
	{24,10},
	{24,9},
	{24,8},
	{24,7},
	{24,6},
	{25,6},
	{26,6},
	{27,6},
	{28,6},
	{29,6},
	{30,6},
	{31,6},
	{32,6},
	{33,6},
	{34,6},
	{34,7},
	{34,8},
	{34,9},
	{34,10},
	{35,10},
	{35,11},
	{35,12},
	{35,13},
	{35,14},
	{35,15},
	{35,16},
	{34,16},
	{33,16},
	{32,16},
	{32,17},
	{31,17},
	{30,17},
	{29,17},
	{28,17},
	{28,16},
	{27,16},
	{26,16},
	{25,16},
	{24,16},
	{23,16},
	{22,16},
	{22,17},
	{22,18},
	{22,19},
	{21,19},
	{20,19},
	{19,19},
	{18,19},
	{17,19},
	{16,19},
	{16,18},
	{15,18},
	{14,18},
	{14,17},
	{13,17},
	{12,17},
	{11,17},
	{10,17},
	{10,18},
	{9,18},
	{8,18},
	{7,18},
	{6,18},
	{5,18},
	{4,18},
	{4,19},
	{4,20}
	};
	std::vector<glm::vec2> path2 = {
	{0,11},
	{1,11},
	{2,11},
	{3,11},
	{4,11},
	{4,10},
	{5,10},
	{6,10},
	{6,9},
	{7,9},
	{8,9},
	{9,9},
	{9,8},
	{9,7},
	{10,7},
	{11,7},
	{12,7},
	{12,8},
	{12,9},
	{12,10},
	{12,11},
	{13,11},
	{14,11},
	{15,11},
	{16,11},
	{17,11},
	{18,11},
	{19,11},
	{20,11},
	{21,11},
	{21,10},
	{22,10},
	{23,10},
	{24,10},
	{25,10},
	{25,11},
	{26,11},
	{27,11},
	{28,11},
	{29,11},
	{30,11},
	{30,10},
	{31,10},
	{31,9},
	{31,8},
	{32,8},
	{33,8},
	{33,9},
	{34,9},
	{34,10},
	{35,10},
	{35,11},
	{35,12},
	{35,13},
	{35,14},
	{36,14},
	{36,15},
	{36,16},
	{36,17},
	{35,17},
	{34,17},
	{33,17},
	{32,17},
	{31,17},
	{31,18},
	{31,19},
	{30,19},
	{29,19},
	{29,18},
	{28,18},
	{27,18},
	{26,18},
	{25,18},
	{25,19},
	{24,19},
	{23,19},
	{22,19},
	{21,19},
	{20,19},
	{19,19},
	{18,19},
	{17,19},
	{16,19},
	{15,19},
	{15,18},
	{15,17},
	{14,17},
	{13,17},
	{12,17},
	{12,18},
	{11,18},
	{10,18},
	{9,18},
	{9,17},
	{8,17},
	{7,17},
	{6,17},
	{6,18},
	{5,18},
	{4,18},
	{4,19},
	{4,20}
	};

	std::vector<glm::vec2> path3 = {
	{39,9},
	{38,9},
	{37,9},
	{37,8},
	{37,7},
	{36,7},
	{35,7},
	{34,7},
	{33,7},
	{32,7},
	{32,8},
	{31,8},
	{30,8},
	{29,8},
	{29,7},
	{28,7},
	{27,7},
	{26,7},
	{26,8},
	{26,9},
	{26,10},
	{26,11},
	{25,11},
	{24,11},
	{24,10},
	{24,9},
	{23,9},
	{22,9},
	{21,9},
	{20,9},
	{20,8},
	{20,7},
	{19,7},
	{18,7},
	{18,8},
	{18,9},
	{18,9},
	{17,9},
	{16,9},
	{15,9},
	{14,9},
	{13,9},
	{13,8},
	{13,7},
	{12,7},
	{11,7},
	{10,7},
	{10,8},
	{10,9},
	{9,9},
	{8,9},
	{7,9},
	{6,9},
	{5,9},
	{4,9},
	{3,9},
	{3,10},
	{3,11},
	{3,12},
	{2,12},
	{2,13},
	{3,13},
	{3,13},
	{3,14},
	{3,15},
	{3,16},
	{3,17},
	{3,18},
	{3,19},
	{4,19},
	{5,19},
	{5,18},
	{6,18},
	{7,18},
	{7,17},
	{7,16},
	{7,15},
	{7,14},
	{8,13},
	{9,13},
	{10,13},
	{11,13},
	{12,13},
	{12,14},
	{12,15},
	{12,16},
	{13,16},
	{14,16},
	{14,17},
	{14,18},
	{15,18},
	{16,18},
	{17,18},
	{17,17},
	{17,16},
	{18,16},
	{19,16},
	{20,16},
	{20,17},
	{21,17},
	{22,17},
	{23,17},
	{24,17},
	{24,16},
	{24,15},
	{25,15},
	{26,15},
	{27,15},
	{27,16},
	{27,17},
	{27,18},
	{28,18},
	{29,18},
	{30,18},
	{31,18},
	{32,18},
	{33,18},
	{33,17},
	{33,16},
	{33,15},
	{34,15},
	{34,14},
	{35,14},
	{36,14},
	{36,15},
	{37,15},
	{37,16},
	{37,17},
	{38,17},
	{38,18},
	{38,19},
	{38,20},
	};


	std::vector<glm::vec2> path4 = {
		{39, 9},
		{ 38,9 },
		{ 37,9 },
		{ 36,9 },
		{ 36,8 },
		{ 36,7 },
		{ 35,7 },
		{ 34,7 },
		{ 33,7 },
		{ 33,8 },
		{ 33,9 },
		{ 32,9 },
		{ 31,9 },
		{ 30,9 },
		{ 29,9 },
		{ 28,9 },
		{ 27,9 },
		{ 26,9 },
		{ 25,9 },
		{ 24,9 },
		{ 23,9 },
		{ 22,9 },
		{ 21,9 },
		{ 21,10 },
		{ 20,10 },
		{ 19,10 },
		{ 19,11 },
		{ 18,11 },
		{ 17,11 },
		{ 17,10 },
		{ 17,9 },
		{ 16,9 },
		{ 15,9 },
		{ 14,9 },
		{ 13,9 },
		{ 12,9 },
		{ 12,8 },
		{ 11,8 },
		{ 10,8 },
		{ 9,8 },
		{ 8,8 },
		{ 8,9 },
		{ 7,9 },
		{ 6,9 },
		{ 5,9 },
		{ 4,9 },
		{ 4,10 },
		{ 4,11 },
		{ 4,12 },
		{ 4,13 },
		{ 4,14 },
		{ 4,15 },
		{ 4,16 },
		{ 4,17 },
		{ 4,18 },
		{ 5,18 },
		{ 6,18 },
		{ 7,18 },
		{ 7,17 },
		{ 7,16 },
		{ 7,15 },
		{ 7,14 },
		{ 8,14 },
		{ 9,14 },
		{ 10,14 },
		{ 11,14 },
		{ 12,14 },
		{ 13,14 },
		{ 13,15 },
		{ 13,16 },
		{ 13,17 },
		{ 14,16 },
		{ 15,16 },
		{ 16,16 },
		{ 17,16 },
		{ 17,17 },
		{ 17,18 },
		{ 18,18 },
		{ 19,18 },
		{ 20,18 },
		{ 21,18 },
		{ 21,17 },
		{ 22,17 },
		{ 23,17 },
		{ 24,17 },
		{ 25,17 },
		{ 26,17 },
		{ 27,17 },
		{ 28,17 },
		{ 28,18 },
		{ 29,18 },
		{ 30,18 },
		{ 31,18 },
		{ 32,18 },
		{ 33,18 },
		{ 34,18 },
		{ 35,18 },
		{ 35,17 },
		{ 36,17 },
		{ 37,17 },
		{ 38,17 },
		{ 38,18 },
		{ 38,19 },
		{ 38,20 },
		{ 38,21 },
	};
	SpriteObject* lvlSprite;
	SpriteObject dit, dash, arrow, line, profile1, profile2;
	float arrowX = 0.0f;
	Player* player;
	Dice* dice;
	glm::vec2 spawn{ 0.0f };
	glm::vec2 goal{ 0.0f };

	Level(Texture lvlTexture, int level);
	~Level();

	void Draw();

	int lastPatherized = 0;
	void Patherize(); // hehe, good name
	void Update(float deltatime);
};